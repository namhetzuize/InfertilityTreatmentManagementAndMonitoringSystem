@page
@model InfertilityTreatmentSystem.Pages.MedicalProfileModel
@using System.Globalization
@{
    ViewData["Title"] = "Medical Profile";
}

<div class="container py-5">
    <div class="text-center mb-5">
        <h2 class="fw-bold text-primary">🗂️ Hồ Sơ Bệnh Án</h2>
        <p class="text-muted">Danh sách bệnh nhân có lịch hẹn đã hoàn tất.</p>
    </div>

    @if (Model.MedicalProfiles != null && Model.MedicalProfiles.Any())
    {
        <div class="row row-cols-1 row-cols-md-2 g-4">
            @foreach (var appointment in Model.MedicalProfiles)
            {
                <div class="col">
                    <div class="card shadow-sm rounded-4 border-0">
                        <div class="card-body">
                            <h5 class="card-title text-primary fw-bold">
                                👤 @appointment.Customer?.FullName
                            </h5>

                            <div class="my-3">
                                <div class="bg-light border-start border-4 border-primary rounded px-3 py-2">
                                    <h6 class="mb-1 text-secondary">Dịch vụ sử dụng</h6>
                                    <span class="fw-bold fs-5 text-dark">
                                        💼 @appointment.Service?.ServiceName
                                    </span>
                                </div>
                            </div>

                            <a asp-page="/MedicalProfileDetails"
                               asp-route-customerId="@appointment.CustomerId"
                               asp-route-doctorId="@appointment.DoctorId"
                               class="btn btn-outline-primary btn-sm mt-3">                             
                                Xem chi tiết
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="alert alert-info text-center mt-5">
            Không có bệnh nhân nào đã hoàn tất lịch hẹn.
        </div>
    }
</div>
